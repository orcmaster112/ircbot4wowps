using System;
using Meebey.SmartIrc4net;
using System.Net.Sockets;

namespace IRC_Bot
{
    class BasicCommands_PM : Bot
    {
        public static void irc_OnQueryMessage(object sender, IrcEventArgs e)
        {
            switch (e.Data.MessageArray[0])
            {
                case "!calc":
                    try
                    {
                        double num1, num2;
                        string strnum1, strnum2;
                        string oper;
                        double final;
                        strnum1 = e.Data.MessageArray[1];
                        oper = e.Data.MessageArray[2];
                        strnum2 = e.Data.MessageArray[3];

                        // irc.SendMessage(SendType.Message, e.Data.Nick, strnum1 + " " + oper + " " + strnum2 + "=" + final );
                        num1 = Convert.ToDouble(strnum1);
                        num2 = Convert.ToDouble(strnum2);
                        if (oper == "+")
                        {
                            final = num1 + num2;
                            irc.SendMessage(SendType.Message, e.Data.Nick,
                                            "10" + num1 + "" + "14" + oper + "" + "10" + num2 + "14" + "=" + "10" +
                                            final);
                        }
                        if (oper == "-")
                        {
                            final = num1 - num2;
                            irc.SendMessage(SendType.Message, e.Data.Nick,
                                            "10" + num1 + "" + "14" + oper + "" + "10" + num2 + "14" + "=" + "10" +
                                            final);
                        }


                        if (oper == "*")
                        {
                            final = num1*num2;
                            irc.SendMessage(SendType.Message, e.Data.Nick,
                                            "10" + num1 + "" + "14" + oper + "" + "10" + num2 + "14" + "=" + "10" +
                                            final);
                        }

                        if (oper == "/")
                        {
                            final = num1/num2;
                            irc.SendMessage(SendType.Message, e.Data.Nick,
                                            "10" + num1 + "" + "14" + oper + "" + "10" + num2 + "14" + "=" + "10" +
                                            final);
                        }
                    }
                    catch
                    {
                        Console.WriteLine("Error: incorrect syntax, command: !calc");
                    }
                    break;

                case "!realmlist":
                    irc.SendMessage(SendType.Message, e.Data.Nick,
                                    "Current realmlist: logon.scapegaming.com - Patch 3.0.9 required " + " -- " +
                                    " WotLK PTR (3.0.9) running at ptr.scapegaming.com, 20x kill/30x quest.");
                    break;

                case "!commands":

                    irc.SendMessage(SendType.Message, e.Data.Nick,
                                    "Current commands: !realmlist, !patches, !commands, !crackstatus, !scapestatus,!bscapestatus, !legionstatus, !calc, !botinfo");
                    break;

                case "!patches":
                    irc.SendMessage(SendType.Message, e.Data.Nick,
                                    "Patches can be found at wowwiki.com/Patch_Mirrors. Be sure to download the right one for your client locale (ex. enUS, enGB, esES etc.)");

                    break;

                case "!scapestatus":
                    string scapestatus = ServerStatus.GetStatus(wowscape_ip, 8000); //WoWscape (Funserver) is port 8000 for some reason, others are still 3724
                    irc.SendMessage(SendType.Message, e.Data.Nick, "WoWscape is currently " + scapestatus);
                    break;
                case "!crackstatus":
                    string crackstatus = ServerStatus.GetStatus(wowcrack_ip, 3724);
                    irc.SendMessage(SendType.Message, e.Data.Nick, "WoWcrack is currently " + crackstatus);
                    break;
                case "!legionstatus":
                    string legionstatus = ServerStatus.GetStatus(wowlegion_ip, 3724);
                    irc.SendMessage(SendType.Message, e.Data.Nick, "WoWlegion is currently " + legionstatus);
                    break;


                case "!bscapestatus":
                    string bscapestatus = ServerStatus.GetStatus(bscape_ip, 3724);
                    irc.SendMessage(SendType.Message, e.Data.Nick, "Battlescape is currently " + bscapestatus);
                    break;

                case "!botinfo":
                    irc.SendMessage(SendType.Notice, e.Data.Nick,
                                    "WoWscape/Scape Gaming IRC Bot r" + Revision.bot_revision);
                    irc.SendMessage(SendType.Notice, e.Data.Nick, "Coded by orcmaster112");
                    irc.SendMessage(SendType.Notice, e.Data.Nick, "SVN:  http://my-svn.assembla.com/svn/scapeircbot");
                    break;
            }
        }
    }
}